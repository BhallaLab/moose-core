name: C/C++ CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install dependencies
      run: |
        sudo apt update
        sudo apt install libgsl-dev g++ cmake python3-pip python3-numpy python3-matplotlib
        sudo apt install python-dev python-numpy python-matplotlib python-pip
    - name: configure
    - name: make
      run: |
        python setup.py install test
        python3 setup.py install test
    - name: Post Install
      run: |
        python3 -c "import moose;moose.test()" || echo "Failed python3 tests"
        python2 -c "import moose;moose.test()" || echo "Failed python2 tests"
