language: cpp
compiler: 
    - gcc
os:
    - linux
    - osx
matrix:
    allow_failures:
        - os: osx
branches:
    only:
        - master
        - trunk
env:
    - CTEST_MODEL=Nightly 
cache: apt
before_script: 
    - sudo apt-get install libxml2-dev libbz2-dev 
    - sudo apt-get install libhdf5-openmpi-dev
    - sudo apt-get install python-numpy python-setuptools
    - sudo apt-get install make texinfo cmake 
    - sudo apt-get install python-suds python-matplotlib
install:
    - wget ftp://ftp.gnu.org/gnu/gsl/gsl-1.16.tar.gz
    - tar -xzvf gsl-1.16.tar.gz
    - cd gsl-1.16 && ./configure --prefix=/usr && make && sudo make install && cd ..
      #- wget http://sourceforge.net/projects/sbml/files/libsbml/5.11.4/stable/libSBML-5.11.4-core-src.tar.gz
      #- tar -xzvf libSBML-5.11.4-core-src.tar.gz 
      #- cd libsbml-5.11.4 && ./configure --prefix=/usr --with-zlib --with-bzip2 && make && sudo make install && cd ..
script: 
    - mkdir -p _build && cd _build && cmake -DDEBUG=OFF ..  && make VERBOSE=0
    - ctest ${CTEST_ARGS} --output-on-failure 

after_success:
    - sudo pip install cpp-coveralls;
    - coveralls -b build -E ".*CMakeFiles.*" -e cli -e test -e tmp --gcov gcov-4.8 --gcov-options '\-lp' > /dev/null;
